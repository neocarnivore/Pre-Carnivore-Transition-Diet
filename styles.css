:root{
  --bg:#0b0b0f;--card:#151821;--text:#e8eef6;--muted:#5c6e83;--acc:#48d1b5;--red:#ff7575;--input:#0f1218;--border:#23304a;
  --p:#2aa1ff;--f:#ffb454;--c:#48d1b5;
  --axis:rgba(255,255,255,.9);--grid:rgba(255,255,255,.12);--axisLine:rgba(255,255,255,.35)
}
.light{
  --bg:#f6f8fb;--card:#ffffff;--text:#1a2732;--muted:#5c6e83;--acc:#0aa37f;--red:#d13b3b;--input:#ffffff;--border:#dfe8f2;
  --p:#0a84ff;--f:#ff9900;--c:#0aa37f;
  --axis:#13283d;--grid:rgba(19,40,61,.10);--axisLine:rgba(19,40,61,.35)
}
*{box-sizing:border-box;font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Hiragino Kaku Gothic ProN","Yu Gothic",sans-serif}
body{margin:0;background:linear-gradient(180deg,var(--bg),#10131b00);color:var(--text)}
header{
  position:sticky;top:0;z-index:1000;
  display:flex;justify-content:space-between;align-items:center;gap:8px;
  padding:16px 14px 6px;font-weight:800;font-size:clamp(16px,2.4vw,20px);
  background:linear-gradient(180deg,var(--bg),rgba(0,0,0,0.0));
  border-bottom:1px solid var(--border);
  backdrop-filter:saturate(1.1);
}
.wrap{padding:10px;max-width:1080px;margin:auto}
.card{background:var(--card);border-radius:14px;padding:14px;margin:10px 0;box-shadow:0 8px 24px rgba(0,0,0,.18);border:1px solid var(--border)}
label{display:block;font-size:13px;color:var(--muted);margin:8px 0 6px}
input,select,button{width:100%;padding:12px 10px;border-radius:10px;border:1px solid var(--border);background:var(--input);color:var(--text)}
button{cursor:pointer;background:var(--acc);border:none;color:#fff;font-weight:700}

.row3{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:10px}
.row6{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:10px}

.formGrid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px}
.formGrid > .pair{display:grid;grid-template-columns:1fr 1fr;gap:12px}
@media (max-width:430px){
  .formGrid{grid-template-columns:1fr}
  .formGrid > .pair{grid-template-columns:1fr 1fr}
}

.kpi{background:var(--input);border:1px solid var(--border);border-radius:12px;padding:10px;text-align:center;min-width:0}
.kpi b{display:block;font-size:18px;margin-top:2px;word-break:break-word}
.big{font-size:clamp(22px,4vw,28px);font-weight:900;color:var(--acc)}
.small{font-size:12px;color:var(--muted)}
.warn{color:var(--red);font-size:12px;margin-top:6px}

.macroBox .label{font-size:12px;color:var(--muted);font-weight:400;margin-bottom:2px}
.macroBox .val{font-size:clamp(20px,3.5vw,24px);font-weight:800;line-height:1.1}
.macroBox .kcal b{font-size:16px}

.bar{height:8px;background:#0f141e;border:1px solid var(--border);border-radius:999px;overflow:hidden;margin-top:8px}
.bar span{display:block;height:100%;width:0%}
.bar.p span{background:var(--p)} .bar.f span{background:var(--f)} .bar.c span{background:var(--c)}
.light .bar{background:#fff;border:1.5px solid #d7e2ef}

.tab{display:grid;grid-template-columns:1fr 1fr 1fr;gap:6px}
.tab button{background:transparent;border:1px solid var(--border);color:var(--text);padding:10px;border-radius:10px}
.tab button.active{background:var(--acc);color:#fff;border-color:transparent}

.tab.weeks{grid-template-columns:repeat(6,1fr)}
.tab.days{grid-template-columns:repeat(7,1fr)}
.tab.days button{padding:8px 6px;font-size:12px}
@media (max-width:540px){
  .tab.weeks{grid-template-columns:repeat(3,1fr)}
  .tab.days{grid-template-columns:repeat(4,1fr)}
}

.chartCard{display:flex;flex-direction:column;align-items:center}
.chartHeader{display:flex;flex-wrap:wrap;align-items:center;justify-content:center;gap:10px;margin:6px 0 10px}
.chartBtns{display:flex;gap:6px;flex-wrap:wrap;justify-content:center}
.chartBtns button{background:transparent;border:1px solid var(--border);color:var(--text)}
.chartBtns button.active{background:var(--acc);color:#fff;border-color:transparent}
.chartPickers{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin:6px 0 10px;width:100%;max-width:820px}
@media (max-width:540px){ .chartPickers{grid-template-columns:1fr} }
canvas{width:min(820px,100%);height:auto;display:block;border-radius:10px;margin:0 auto}

.fixgrid{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin:8px 0}
@media (max-width:430px){ .fixgrid{grid-template-columns:repeat(2,1fr);} }

.footerNote{color:#000 !important}
.light .footerNote{color:#000 !important}
.footerNote a{color:var(--p);text-decoration:underline}
